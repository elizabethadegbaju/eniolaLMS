{% extends 'base_dashboard.html' %}
{% load static %}
{% block main %}
    <div class="page">
        <!-- Counts Section -->
        <section class="dashboard-counts section-padding">
            <div class="container-fluid">
                <div class="row">
                    <!-- Count item widget-->
                    <div class="col-xl-3 col-md-4 col-6">
                        <div class="wrapper count-title d-flex">
                            <div class="icon"><i class="icon-user"></i></div>
                            <div class="name"><strong class="text-uppercase">New
                                Students</strong><span>Last 7 days</span>
                                <div class="count-number">{{ new_students }}</div>
                            </div>
                        </div>
                    </div>
                    <!-- Count item widget-->
                    <div class="col-xl-3 col-md-4 col-6">
                        <div class="wrapper count-title d-flex">
                            <div class="icon"><i class="icon-calendar"></i></div>
                            <div class="name"><strong class="text-uppercase">Book
                                Reservations</strong><span>Last 5 days</span>
                                <div class="count-number">{{ reservations }}</div>
                            </div>
                        </div>
                    </div>
                    <!-- Count item widget-->
                    <div class="col-xl-3 col-md-4 col-6">
                        <div class="wrapper count-title d-flex">
                            <div class="icon"><i class="icon-check"></i></div>
                            <div class="name"><strong class="text-uppercase">Book
                                Collections</strong><span>Last 5 days</span>
                                <div class="count-number">{{ collections }}</div>
                            </div>
                        </div>
                    </div>
                    <!-- Count item widget-->
                    <div class="col-xl-3 col-md-4 col-6">
                        <div class="wrapper count-title d-flex">
                            <div class="icon"><i class="icon-clock"></i></div>
                            <div class="name"><strong class="text-uppercase">Overdue
                                Books</strong><span>Last 2 months</span>
                                <div class="count-number">{{ overdue_books }}</div>
                            </div>
                        </div>
                    </div>
                    <!-- Count item widget-->
{#                    <div class="col-xl-2 col-md-4 col-6">#}
{#                        <div class="wrapper count-title d-flex">#}
{#                            <div class="icon"><i class="icon-reload"></i></div>#}
{#                            <div class="name"><strong class="text-uppercase">Closed Transactions</strong><span>Last 2 weeks</span>#}
{#                                <div class="count-number">{{ closed_transactions }}</div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                    <!-- Count item widget-->#}
{#                    <div class="col-xl-2 col-md-4 col-6">#}
{#                        <div class="wrapper count-title d-flex">#}
{#                            <div class="icon"><i class="icon-note"></i></div>#}
{#                            <div class="name"><strong class="text-uppercase">Outstanding#}
{#                                Fines (&#x20a6;)</strong><span>All time</span>#}
{#                                <div class="count-number">{{ outstanding_fines.fine__sum }}</div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
                </div>
            </div>
        </section>
        <!-- Statistics Section-->
        <section class="statistics">
            <div class="container-fluid">
                <div class="row d-flex">
                    <div class="col-lg-4">
                        <!-- Income-->
                        <div class="card income text-center">
                            <div class="icon"><i class="fas
                            fa-list-ul"></i></div>
                            <div class="number">{{ books }}</div>
                            <strong class="text-primary">Books</strong>
                            <p>Number of distinct books in the library.</p>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <!-- Monthly Usage-->
                        <div class="card data-usage">
                            <h2 class="display h4">Books Availability</h2>
                            <div class="row d-flex align-items-center">
                                <div class="chart-area">
                                    <canvas style="max-width: none"
                                            data-bs-chart='{"type":"pie","data":{"labels":["Available","Not Available"],"datasets":[{"label":"","backgroundColor":["#f4476b","#894f62"],"borderColor":["#ffffff","#ffffff"],"data":["{{ available }}", "{{ unavailable }}"]}]},"options":{"maintainAspectRatio":false,"legend":{"display":true},"title":{}}}'></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <!-- Collected Books-->
                        <div class="card user-activity">
                            <h2 class="display h4">Overdue Rate</h2>
                            <div class="number">{{ total_overdue }}</div>
                            <h3 class="h4 display">Overdue</h3>
                            <div class="progress">
                                <div role="progressbar" style="width: {{ overdue_percentage }}%"
                                     aria-valuenow="{{ overdue_percentage }}" aria-valuemin="0"
                                     aria-valuemax="100" class="progress-bar progress-bar bg-primary"></div>
                            </div>
                            <div class="page-statistics d-flex justify-content-between">
                                <div class="page-statistics-left">
                                    <span>Borrowed</span><strong>{{ total_collections }}</strong></div>
                                <div class="page-statistics-right">
                                    <span>Overdue</span><strong>{{ overdue_percentage }}%</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
{% endblock %}